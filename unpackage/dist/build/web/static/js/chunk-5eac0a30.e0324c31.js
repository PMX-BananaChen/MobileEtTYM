(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5eac0a30"],{2099:function(e,t,a){"use strict";a("6a54");var o=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("64aa"),a("aa9c"),a("c223"),a("5c47"),a("a1c1"),a("0c26");var s=a("1f67"),i=o(a("cc97")),n=a("1fb6"),r=a("aacd"),l=a("53c0"),c={data:function(){return{id:"",userNo:this.$store.state.userNo,titles:"状态",titlesv:"待签核",showT:!1,msgbox:!1,opinShow:!1,butonShow:!1,opinionsList:[],opinionsLists:[],errorMsg:{resulta:""},showLoading:!0,loadText:"加载中...",count:0,timer:0,form:{type:"",audituser:"",backuser:"",backremark:""},active:1,tabbars:[{name:"/apply",title:"放行申请",normal:a("bbd1"),active:a("bfc7")},{name:"/login",title:"工作台",normal:a("fb63"),active:a("d689")},{name:"/mynavigation",title:"我的",normal:a("eba7"),active:a("3e20")}]}},created:function(){var e=this;this.id=window.location.href.split("?id=")[1],null==this.id&&(this.id=this.$store.state.userNo),null===this.$store.state.userId||""===this.$store.state.userId?this.setUser():(0,s.getReleaseapply)(this.id).then((function(t){200===t.code&&(e.opinionsList=t.data,console.log(e.opinionsList.states),2===e.opinionsList.states?(e.errorMsg.resulta="已经处理！",e.showT=!0,e.showLoading=!1,e.butonShow=!0):(e.processOpinion(),e.showLoading=!1,0===e.opinionsList.length&&(e.errorMsg.resulta="数据异常!")))}))},methods:{tabIndex:function(e){e=Number(e),this.active=e;var t=this.tabbars[e].name;console.log(t),this.$router.push(t)},processOpinion:function(){var e=[],t={label:"申请员工",value:this.opinionsList.empname},a={label:"所在部门",value:this.opinionsList.dept},o={label:"出行日期",value:i.default.formatDate(this.opinionsList.date)},s={label:"出行时段",value:this.opinionsList.startime+"~"+this.opinionsList.endtime},n={label:"申请理由",value:this.opinionsList.remark},r=new Array(t,a,o,s,n);e.push(r),this.opinShow=0===e.length,this.opinionsLists=[].concat(e)},submit:function(e){var t=this;this.showLoading=!0,"b"==e?(this.validCode(),this.form.type=3):this.form.type=2,this.form.id=this.opinionsList.id;var a=this.opinionsList.managerno.replace(/\b(0+)/gi,"");this.form.audituser=a,this.form.backuser=a,(0,s.updateReleaseapply)(this.form).then((function(e){if(200===e.code)if(t.showLoading=!1,e.data.Message.length>0)t.errorMsg.resulta=e.data.Message;else{t.msgbox=!0;t.timer||(t.count=1,t.timer=setInterval((function(){t.count>0&&t.count<=1?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null,t.$router.push("/managercheck"))}),100))}else t.errorMsg.resulta="新增失败!"}))},validCode:function(){var e=this.form.backremark;e||(this.errorMsg.resulta="退回原因")},query:function(e){e&&(this.form.backremark=e.detail)},backHome:function(){this.$router.push(this.$store.state.tableIndex)},setUser:function(){var e=this,t=i.default.getUrlParam("code");null!==t?(0,r.getCode)(t).then((function(t){if(1===t.code){var a=t.data.empNo.trim();e.$store.commit("setUserId",a),e.setUserName(e.$store.state.userId)}})).catch((function(e){console.log(e)})):i.default.getCodeApi("a")},setUserName:function(e){var t=this;null!==e&&""!==e&&(0,l.getEmployee)(e).then((function(e){"操作成功"===e.msg?(t.$store.commit("setUserName",e.data.empName),t.$store.commit("setSex",e.data.empSex),(0,s.getReleaseapply)(t.id).then((function(e){200===e.code&&(t.opinionsList=e.data,console.log(t.opinionsList.states),2===t.opinionsList.states?(t.errorMsg.resulta="已经处理！",t.showLoading=!1,t.showT=!0,t.butonShow=!0):(t.processOpinion(),t.showLoading=!1,0===t.opinionsList.length&&(t.errorMsg.resulta="数据异常!")))}))):console.log(err)})).catch((function(e){console.log(e)}))}},components:{Loading:n.Loading}};t.default=c},"401a":function(e,t,a){var o=a("c86c");t=o(!1),t.push([e.i,".van-divider--center[data-v-01c95026]{text-align:center;font-size:larger;color:#007aff}.demo-checkbox-group[data-v-01c95026]{margin:10px 0 0 20px}.demo-checkbox[data-v-01c95026]{margin:100px 0 0 20px}.value-class[data-v-01c95026]{flex:none!important}.icon[data-v-01c95026]{width:20px}.weui-tabbar[data-v-01c95026]{display:flex;position:fixed;z-index:500;bottom:0;width:100%;background-color:#f7f7fa}.van-tabbar-item--active[data-v-01c95026]{color:#e10f02}.vux-form-preview[data-v-01c95026] .weui-form-preview__value{font-size:.8em}.vux-flexbox[data-v-01c95026] .van-button--large{width:100%;height:var(--button-large-height,38px)}.gridCell[data-v-01c95026] .van-icon{font-size:50px}.vant-nav-bar-index[data-v-01c95026] .van-icon-arrow-left:before{color:#999;block-size:30px}\n\n/* .weui-form-preview[data-v-124387c3]\n{\n  float: center;\n  margin-right: 1em;\n  min-width: 4em;\n  max-width: em;\n  color: var(--weui-FG-1);\n  text-align: right;\n  text-align-last: right\n} */",""]),e.exports=t},"51aa":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-form",{ref:"form",attrs:{model:"form"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showT,expression:"showT"}],staticClass:"van-divider--center"},[e._v("暂无签核数据")]),a("div",[a("loading",{attrs:{text:e.loadText},model:{value:e.showLoading,callback:function(t){e.showLoading=t},expression:"showLoading"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.msgbox,expression:"!msgbox"}]},[e._l(e.opinionsLists,(function(t,o){return a("group",{key:o,staticClass:"formItem",attrs:{id:"listId"}},[a("form-preview",{attrs:{"header-label":e.titles,"header-value":e.titlesv,"body-items":e.opinionsLists[0],name:e.opinionsList.id}})],1)})),a("van-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.form.audituser,callback:function(t){e.$set(e.form,"audituser",t)},expression:"form.audituser"}}),a("van-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.form.backuser,callback:function(t){e.$set(e.form,"backuser",t)},expression:"form.backuser"}}),a("van-field",{attrs:{"error-message":e.errorMsg.resulta,type:"textarea",placeholder:"请输入退回原因",rows:"3",autosize:!0},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.query.apply(void 0,arguments)}},model:{value:e.form.backremark,callback:function(t){e.$set(e.form,"backremark",t)},expression:"form.backremark"}}),a("box",{directives:[{name:"show",rawName:"v-show",value:!e.butonShow,expression:"!butonShow"}],attrs:{gap:"20px 20px"}},[a("flexbox",[a("flexbox-item",[a("van-button",{staticClass:"van-button--large",attrs:{type:"primary",size:"large",round:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit("a")}}},[a("span",{staticStyle:{"font-size":"20px"}},[e._v("同意")])])],1),a("flexbox-item",[a("van-button",{staticClass:"van-button--large",attrs:{type:"danger",size:"large",round:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit("b")}}},[a("span",{staticStyle:{"font-size":"20px"}},[e._v("退回")])])],1)],1)],1)],2),a("msg",{directives:[{name:"show",rawName:"v-show",value:e.msgbox,expression:"msgbox"}]},[a("template",{slot:"buttons"},[a("x-button",{attrs:{plain:!0,type:"primary"}},[e._v("操作成功")])],1)],2),a("van-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"error-message":e.errorMsg.resulta,border:!1},model:{value:e.form.startimea,callback:function(t){e.$set(e.form,"startimea",t)},expression:"form.startimea"}}),a("van-tabbar",{staticClass:"weui-tabbar",attrs:{"active-color":"#ff4c7f"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabbars,(function(t,o){return a("van-tabbar-item",{key:"tabbar"+o,attrs:{to:t.name},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tabIndex(o)}},scopedSlots:e._u([{key:"icon",fn:function(e){return[a("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:e.active?t.active:t.normal}})]}}],null,!0)},[a("span",[e._v(e._s(t.title))])])})),1)],1)},s=[]},"9b9d":function(e,t,a){"use strict";a.r(t);var o=a("2099"),s=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=s.a},aff5:function(e,t,a){"use strict";a.r(t);var o=a("51aa"),s=a("9b9d");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("b887");var n=a("828b"),r=Object(n["a"])(s["default"],o["b"],o["c"],!1,null,"01c95026",null,!1,o["a"],void 0);t["default"]=r.exports},b887:function(e,t,a){"use strict";var o=a("b91e"),s=a.n(o);s.a},b91e:function(e,t,a){var o=a("401a");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=a("967d").default;s("5db97702",o,!0,{sourceMap:!1,shadowMode:!1})}}]);